<template>
	<div>
		<div class="section">
		  	<div class="hd">
			    <div class="hd-inner no">
			      	<span class="hd-title">第6期考核排名</span>
			      	<span class="hd-analysis">
				        <router-link to="/main/transactionAnalysis">
				          <i>一级考核排名></i>
				        </router-link>
			      	</span>
			    </div>
		  	</div>
		</div>

		<!-- 2017年n月（上/下）返佣汇总(圆环图) -->
		<div class="section">
			<div class="hd">
				<div class="hd-inner rinking">
					<span class="item">考核项目</span>
					<span class="item">名次</span>
					<span class="item">总计</span>
				</div>
			</div>
			<div class="content">
				<div class="rinkingList">
					<ul>
						<li>
							<span>日均资产总值</span>
							<span>16</span>
							<span>36.47（万元）</span>
						</li>
						<li>
							<span>交易额</span>
							<span>12</span>
							<span>7836.47（万元）</span>
						</li>
						<li>
							<span>开户量</span>
							<span>9</span>
							<span>4983（人）</span>
						</li>
						<li>
							<span>一级经纪商</span>
							<span>18</span>
							<span>63（人）</span>
						</li>
					</ul>
				</div>
			</div>
		</div>

		<!-- 近7日第6期排名趋势 -->
		<div class="section">
		  	<div class="hd">
			    <div class="hd-inner">
			      	<span class="hd-title">近7日第6期排名趋势</span>
	              	<span class="dete-control" @click="pieRequest"></span>
	              	<span class="curdate" id="J-xl-2"><!-- {{curdate}} --></span>
			    </div>
		  	</div>
		  	<div class="content">
		    	<div id="polylineRebate" style="width:100%;height:2rem;"></div>
		  	</div>
		</div>

	</div>
</template>

<script>
import echarts from 'common/js/echarts.min.js';
import 'common/js/jquery-1.8.3.min.js';
import 'common/js/laydate.dev.js';

export default{
 	data(){
 	    return {
 	        
 	    }
 	},
 	created(){
 		
 	},
	methods:{
	    // 折线图
	    polylineRebate: function(el){
	    	let polylineRebate = echarts.init(document.getElementById(el));
	    	let option = {
	    	    tooltip : {
	    	        trigger: 'axis',
	    	        axisPointer: {
	    	            type: 'cross',
	    	            label: {
	    	                backgroundColor: '#6a7985'
	    	            }
	    	        },
	    	        formatter: function(params) {
	    	            // for text color
	    	            var colorList = ['#ff954b'];
	    	            var res = '<div>';
	    	            res += '<strong>' + params[0].name + '</strong>'
	    	            for (var i = 0, l = params.length; i < l; i++) {
	    	                res += '<br/><span style="display:inline-block;margin: 0 5px;height:10px;width:10px;border-radius:50%;background-color: '+colorList[i]+'"></span>' + params[i].seriesName + ' : ' + parseInt(-params[i].value)
	    	            }
	    	            res += '</div>';
	    	            return res;
	    	        }
	    	    },
	    	    toolbox: {
	    	        feature: {
	    	            saveAsImage: {}
	    	        }
	    	    },
	    	    grid: {
	    	        left: '2%',
	    	        right: '6%',
	    	        bottom: '3%',
	    	        top: '4%',
	    	        containLabel: true
	    	    },
	    	    color: ['#ff6000'],
	    	    xAxis : [
	    	        {
	    	            type : 'category',
	    	            boundaryGap : false,
	    	            data : ['02/25','02/26','02/27','02/28','03/01','03/02','03/03'],
	    	            axisLabel :{  
		                    interval:0,
		                },
		                splitLine: {
		                    show: true,
			                lineStyle:{
			                	color:"#e1e1e1",
			                	type:"solid"
			                }
		                },
		                axisLine: {onZero: false}
	    	        }
	    	    ],
	    	    yAxis : [
	    	        {
	    	            type : 'value',
	    	            max: 'dataMax',
            	        axisLabel:{ 
        	    	        formatter:function(v){ 
        	    	        	return -v; 
        	    	        } 
            	        } 
	    	        }
	    	    ],
	    	    series : [
	    	        {
	    	            name:'排名',
	    	            type:'line',
	    	            areaStyle: {normal: {}},
	    	            data:[-30, -29, -20, -25, -40, -60, -34],
	    	            areaStyle: {
	    	               normal: {
	    	                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
	    	                       offset: 0,
	    	                       color: 'rgba(255, 102, 0, 1)'
	    	                   }, {
	    	                       offset: 1,
	    	                       color: 'rgba(255, 249, 245, 0.2)'
	    	                   }])
	    	               }
	    	           },
	    	           lineStyle: {
		    	            normal: {
		    	                type: 'solid',
		    	                color:"#ff6000",
		    	                opacity :"1"
		    	            }
	    	 			}
	    	        }
	    	    ]
	    	};
	    	polylineRebate.setOption(option);
	    },
	    // 
	    pieRequest: function(){
	    	var _this = this;
	    	this.coverShow = true;
	        laydate({
	            elem: '#J-xl-2',
	            min: '2016-10-01', //设定最小日期
	            max: laydate.now(-1), //最大日期
	            choose: function(datas){ //选择日期完毕的回调
	            	var date = datas;
	            	date = date.replace(/-/g,'');
	                _this.getPieDete(date);
	                _this.coverShow = false
	            }

	        });
	    },
	},
	mounted() {
	    this.polylineRebate('polylineRebate');
	}
};

</script>

<style lang="stylus" rel="stylesheet/stylus">
	#laydate_box
	    right: 10px!important
	    left: auto!important
	// 返佣总览
	.overview-rebate
		width: 100%
		height: 2rem
		position: relative
		background-color: #FFF
		overflow: hidden
		.canvas
			position: absolute
			top: 50%
			left: 50%
			transform: translateX(-50%) translateY(-50%) scale(0.5)
	.hd-analysis
	  	float: right
	  	i
	    	font-style: normal
	    	font-size: 0.12rem
	    	color: #54b9ff
	.rinking
		.item
			float: left
			width: 33.33%
			text-align: center
	.rinkingList
		li
			width: 100%
			height: 0.5rem
			span
				float: left
				width: 33.33%
				text-align: center
				color: #ff6000
				font-weight: 500
				line-height: 0.5rem
				font-size: 0.13rem
				&:nth-child(1)
					color: #999999
					font-weight: normal
</style>