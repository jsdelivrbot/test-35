<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>交易明细</title>
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta name="format-detection" content="telephone=no">
	<link rel="stylesheet" href="css/fcds.css">
	<link rel="stylesheet" href="css/nav.css">
	<link rel="stylesheet" href="css/loader.css">
</head>
<body>

	<div class="loader_cover_box">
		<div class="loader">加载中...</div>
	</div>

	<div class="detailed_list transaction" id="detailed_list">
		<div class="list list_1 cur" id="uncommittedList" >
			<div class="item" id="transactionList">
				<!-- senior level_1-->
				<b class="d_grade level_1"></b>
				<p class="user_ifon"><i class="user_name" id="user_name"></i><i class="user_adderss" id="brokerUserName"></i></p>
				<p class="r_low width25 first"><span>日期</span><span>买入</span><span>卖出</span><span>每日总计</span></p>
				<!-- <p class="r_low width25"><span>2017-01-01</span><span><i>3</i><i>￥32400</i></span><span><i>3</i><i>￥32400</i></span><span><i>6</i><i>￥32400</i></span></p> -->
				
			</div>
		</div>
		<!-- <div class="empty_data"><div class="empty"></div></div> -->
	</div>
	<!-- <div class="dayTotal">
		<p>
			<span>总计：</span>
			<span>买：168</span>
			<span>卖：124</span>
			<span>交易额：1346240（元）</span>
		</p>
	</div> -->
	<div style="height:70px"></div>
	<p class="tips" id="tips">&nbsp;</p>
	<script src="js/jquery-1.8.3.min.js"></script>
	<script src="js/mo.js"></script>
    <script src="js/jquery.cookie.js"></script>
    <script src="js/common.js"></script>
	<script type="text/javascript">
		$(function() {    
			$("body").css("background-color","#fff");
			$(".loader_cover_box").css("display","block");


	        var session_token=$.cookie('session_token');
			var startDate = GetQueryString("startDate");
			var endDate = GetQueryString("endDate");
			var brokerUserNo = GetQueryString("brokerUserNo");
	        app.ajaxHelper.submitRequest({
	            url: '/api/transactionInfo',
	            data: {
	                session_token: session_token,
	                startDate: startDate,
	                endDate: endDate,
	                brokerUserNo: brokerUserNo
	            },
	            success: function (data) {
	                var state = data.result;
	                if (state == "success") {

	                    $(".loader_cover_box").css("display","none");

		                function detailedListHtml(transDate,buyCount,buyMoney,saleCount,saleMoney,dayCount,dayMoney) {

			                var html = '<p class="r_low width25"><span>'+transDate+'</span><span><i>'+buyCount+'</i><i>￥'+buyMoney+'</i></span><span><i>'+saleCount+'</i><i>￥'+saleMoney+'</i></span><span><i>'+dayCount+'</i><i>￥'+dayMoney+'</i></span></p>';

			                return html;
		                }

		                function totaHtml(buyAmount,saleAmount,totalAmount){
		                	var dayTotalHtml = '<div class="dayTotal"><p><span>总计：</span><span>买：'+buyAmount+'</span><span>卖：'+saleAmount+'</span><span>交易额：'+totalAmount+'（元）</span></p></div>'
		               		return dayTotalHtml;
		                }

		                $(data.data.transactionList).each(function(i){
		                	var listHtml = detailedListHtml(this.transDate,this.buyCount,this.buyMoney,this.saleCount,this.saleMoney,this.dayCount,this.dayMoney);
		                	$('#transactionList').append(listHtml);
		                })

		                $(data.data.sum).each(function(i){
		                	var listHtml = totaHtml(this.buyAmount,this.saleAmount,this.totalAmount);
		                	$("body").append(listHtml);
		                })

		                $("#user_name").html(data.data.brokerName);
		                $("#brokerUserName").html('（'+GetQueryString("startDate")+'至'+GetQueryString("endDate")+'）');

	                } else if (state > "error") {
	                    
	                } else if (state < "noSession") {
	                    window.location.href = "login.html";
	                }
	            }
	        })
	        
		});   
	</script>
</body>
</html>